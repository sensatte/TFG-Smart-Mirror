#:kivy 1.0
#:set buttonsSize (.2, .25)
#:set cloudImage "https://asxornvikq.cloudimg.io/v7/"
#:set roundedCorners "?radius=32&force_format=png"

<SpotifyWidget>:
    size_hint:(.2, .1)
    pos: 0,5

    ImageButton:
        id: startPauseButton
        disabled: root.relaxing
        color: [.3, .3, .3, 1] if self.disabled  else [1, 1, 1, 1]
        keep_ratio: False
        allow_stretch: True
        source: "images/icons/spotify/boton-de-play.png" if (root.paused) else "images/icons/spotify/boton-de-pausa.png"
        pos_hint: {"center_x": .5, "center_y": .5}
        size_hint: buttonsSize
        on_press: root.relaxWithThePresses()
        on_press: root.pauseResume()
        on_press: root.pushedButtonAnim(self)
        on_press: root.paused = not root.paused
        on_press: print(self.source)

    ImageButton:
        id: nextButton
        disabled: root.relaxing
        color: [.3, .3, .3, 1] if self.disabled  else [1, 1, 1, 1]
        keep_ratio: False
        allow_stretch: True
        source: "images/icons/spotify/siguiente.png"
        pos_hint: {"center_x": .5, "center_y": .5}
        size_hint: buttonsSize
        on_press: root.relaxWithThePresses()
        on_press: root.next()
        on_press: root.pushedButtonAnim(self)
        on_press: root.paused = False

    ImageButton:
        id: previousButton
        disabled: root.relaxing
        color: [.3, .3, .3, 1] if self.disabled  else [1, 1, 1, 1]
        keep_ratio: False
        allow_stretch: True
        source: "images/icons/spotify/anterior.png"
        pos_hint: {"center_x": .5, "center_y": .5}
        size_hint: buttonsSize
        on_press: root.relaxWithThePresses()
        on_press: root.previous()
        on_press: root.pushedButtonAnim(self)
        on_press: root.paused = False

    ImageButton:
        id: volDown
        disabled: root.relaxing
        color: [.3, .3, .3, 1] if self.disabled  else [1, 1, 1, 1]
        keep_ratio: False
        allow_stretch: True
        source: "images/icons/spotify/control-del-volumen-menos.png"
        pos_hint: {"center_x": .5, "center_y": .5}
        size_hint: buttonsSize
        on_press: root.relaxWithThePresses()
        on_press: print("volDown")
        on_press: root.pushedButtonAnim(self)
        on_press: root.volDown()

    ImageButton:
        id: volUp
        disabled: root.relaxing
        color: [.3, .3, .3, 1] if self.disabled  else [1, 1, 1, 1]
        keep_ratio: False
        allow_stretch: True
        source: "images/icons/spotify/control-del-volumen-mas.png"
        pos_hint: {"center_x": .5, "center_y": .5}
        size_hint: buttonsSize
        on_press: root.relaxWithThePresses()
        on_press: print("volUp")
        on_press: root.pushedButtonAnim(self)
        on_press: root.volUp()

    AsyncImageButton:
        id: songImage
        nocache: True
        source: cloudImage+root.songImageUrl+roundedCorners if root.songImageUrl != "" else "images/menu/Spotify_bonico.png"
        size_hint: .7, .7
        pos_hint: {"center_x": .5, "center_y": .5}
        allow_stretch: True
        keep_ratio: True
        on_press: root.collapsed = not root.collapsed
        canvas.before:
            PushMatrix
            Rotate:
                angle: root.songImageAngle
                axis: 0, 0, 1
                origin: self.center
        canvas.after:
            PopMatrix

    Label:
        id: songNameLabel
        text: root.songName
        pos_hint: {"x": .8, "center_y": .5}


    